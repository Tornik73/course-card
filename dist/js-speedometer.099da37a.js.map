{"version":3,"sources":["js-speedometer.js"],"names":["canvas","document","getElementById","ctx","getContext","middleX","width","middleY","height","radius","startAngleIndex","endAngleIndex","zoneLineWidth","counterClockWise","tickWidth","tickColor","tickOffsetFromArc","centerCircleRadius","centerCircleColor","centerCircleBorderWidth","arrowValueIndexCorrect","db","arrowColor","arrowWidth","digits","digitsColor","digitsFont","digitsOffsetFromArc","zonesCount","length","step","DrawZones","greenZonesCount","Math","ceil","yellowZonesCount","redZonesCount","startAngle","PI","endGreenAngle","endYellowAngle","endRedAngle","endblueAngle","sectionOptions","endAngle","color","DrawZone","options","beginPath","arc","lineWidth","strokeStyle","lineCap","stroke","forEach","DrawTicks","DrawTick","angle","fromX","cos","fromY","sin","toX","toY","moveTo","lineTo","i","DrawDigits","angleIndex","digit","x","y","font","fillStyle","textAlign","textBaseline","fillText","DrawArrow","arrowValueIndex","arrowAngle","DrawCenterCircle","fill","speedometr_animation","stop","start","raiting_value","setInterval","innerHTML","raiting_up","clearInterval","value","up_arrow","raiting","raitingCounter","getRaiting","startDrowing","Index","drawA","arrowIndex_value","clearRect"],"mappings":"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","file":"js-speedometer.099da37a.js","sourceRoot":"..","sourcesContent":["let canvas = document.getElementById(\"canvas\");\r\nlet ctx = canvas.getContext(\"2d\");\r\n// general settings\r\nlet middleX = canvas.width / 2;\r\nlet middleY = canvas.height / 2;\r\nlet radius = canvas.width / 2 - canvas.width / 10;\r\n\r\n// beginning and ending of our qrc. Sets by rad * pi\r\nlet startAngleIndex = 0.7;\r\nlet endAngleIndex = 2.3;\r\n\r\n// zones settings\r\nlet zoneLineWidth = canvas.width / 30;\r\nlet counterClockWise = false;\r\n\r\n// tick settings\r\nlet tickWidth = canvas.width / 100;\r\nlet tickColor = \"#746845\";\r\nlet tickOffsetFromArc = canvas.width / 40;\r\n\r\n// Center circle settings\r\nlet centerCircleRadius = canvas.width / 20;\r\nlet centerCircleColor = \"#f2ead9\";\r\nlet centerCircleBorderWidth = canvas.width / 100;\r\n\r\n// Arrow settings\r\n\r\n\r\nlet arrowValueIndexCorrect = 0.7 + db['raiting'] / 250;\r\nlet arrowColor = \"#333333\";\r\nlet arrowWidth = canvas.width / 50;\r\n\r\n// Digits settings\r\nlet digits = [0, 100, 200, 300, 400];\r\nlet digitsColor = \"#000\";\r\nlet digitsFont = \"bold 20px Tahoma\";\r\nlet digitsOffsetFromArc = canvas.width / 12;\r\n\r\nlet zonesCount = digits.length - 1;\r\nlet step = (endAngleIndex - startAngleIndex) / zonesCount;\r\n\r\n\r\n\r\n// methods for drawing canvas elem\r\nlet DrawZones = function () {\r\n\tlet greenZonesCount = Math.ceil(zonesCount / 4);\r\n\tlet yellowZonesCount = Math.ceil((zonesCount - greenZonesCount) / 4);\r\n\tlet redZonesCount = zonesCount - greenZonesCount - yellowZonesCount;\r\n\r\n\tlet startAngle = (startAngleIndex - 0.02) * Math.PI;\r\n\tlet endGreenAngle = (startAngleIndex + greenZonesCount * step) * Math.PI;\r\n\tlet endYellowAngle = (startAngleIndex + (greenZonesCount + yellowZonesCount) * step) * Math.PI;\r\n\tlet endRedAngle = (endAngleIndex - 0.4) * Math.PI;\r\n\tlet endblueAngle = (endAngleIndex + 0.02) * Math.PI;\r\n\r\n\tlet sectionOptions = [{\r\n\t\t\tstartAngle: startAngle,\r\n\t\t\tendAngle: endGreenAngle,\r\n\t\t\tcolor: \"red\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tstartAngle: endGreenAngle,\r\n\t\t\tendAngle: endYellowAngle,\r\n\t\t\tcolor: \"yellow\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tstartAngle: endYellowAngle,\r\n\t\t\tendAngle: endRedAngle,\r\n\t\t\tcolor: \"#009900\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tstartAngle: endRedAngle,\r\n\t\t\tendAngle: endblueAngle,\r\n\t\t\tcolor: \"blue\"\r\n\t\t}\r\n\t];\r\n\r\n\tthis.DrawZone = function (options) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(middleX, middleY, radius, options.startAngle, options.endAngle, counterClockWise);\r\n\t\tctx.lineWidth = zoneLineWidth;\r\n\t\tctx.strokeStyle = options.color;\r\n\t\tctx.lineCap = \"butt\";\r\n\t\tctx.stroke();\r\n\t};\r\n\r\n\tsectionOptions.forEach(function (options) {\r\n\t\tDrawZone(options);\r\n\t});\r\n};\r\n// method for tricks on speedometer\r\nlet DrawTicks = function () {\r\n\r\n\tthis.DrawTick = function (angle) {\r\n\t\tlet fromX = middleX + (radius - tickOffsetFromArc) * Math.cos(angle);\r\n\t\tlet fromY = middleY + (radius - tickOffsetFromArc) * Math.sin(angle);\r\n\t\tlet toX = middleX + (radius + tickOffsetFromArc) * Math.cos(angle);\r\n\t\tlet toY = middleY + (radius + tickOffsetFromArc) * Math.sin(angle);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(fromX, fromY);\r\n\t\tctx.lineTo(toX, toY);\r\n\t\tctx.lineWidth = tickWidth;\r\n\t\tctx.lineCap = \"round\";\r\n\t\tctx.strokeStyle = tickColor;\r\n\t\tctx.stroke();\r\n\t};\r\n\r\n\tfor (let i = startAngleIndex; i <= endAngleIndex; i += step) {\r\n\t\tlet angle = i * Math.PI;\r\n\t\tthis.DrawTick(angle);\r\n\t}\r\n};\r\n\r\n// method for nambers on our speedometer\r\nlet DrawDigits = function () {\r\n\tlet angleIndex = startAngleIndex;\r\n\r\n\tdigits.forEach(function (digit) {\r\n\t\tlet angle = angleIndex * Math.PI;\r\n\t\tangleIndex += step;\r\n\t\tlet x = middleX + (radius - digitsOffsetFromArc) * Math.cos(angle);\r\n\t\tlet y = middleY + (radius - digitsOffsetFromArc) * Math.sin(angle);\r\n\r\n\t\tctx.font = digitsFont;\r\n\t\tctx.fillStyle = digitsColor;\r\n\t\tctx.textAlign = \"center\";\r\n\t\tctx.textBaseline = \"middle\";\r\n\t\tctx.fillText(digit, x, y);\r\n\t});\r\n};\r\n\r\n//method for drawing arrow on speedometer\r\nlet DrawArrow = function (arrowValueIndex) {\r\n\tlet arrowAngle = arrowValueIndex * Math.PI;\r\n\tlet toX = middleX + (radius) * Math.cos(arrowAngle);\r\n\tlet toY = middleY + (radius) * Math.sin(arrowAngle);\r\n\r\n\tctx.beginPath();\r\n\r\n\tctx.moveTo(middleX, middleY);\r\n\tctx.lineTo(toX, toY);\r\n\tctx.strokeStyle = arrowColor;\r\n\tctx.lineWidth = arrowWidth;\r\n\r\n\tctx.stroke();\r\n\r\n};\r\n\r\nlet DrawCenterCircle = function () {\r\n\tctx.beginPath();\r\n\tctx.arc(middleX, middleY, centerCircleRadius, 0, 2 * Math.PI, false);\r\n\tctx.fillStyle = centerCircleColor;\r\n\tctx.fill();\r\n\tctx.lineWidth = centerCircleBorderWidth;\r\n\tctx.strokeStyle = arrowColor;\r\n\tctx.stroke();\r\n};\r\n\r\n//animation of speedometr value\r\nfunction speedometr_animation() {\r\n\tlet stop = db[\"raiting\"];\r\n\tlet start = 0;\r\n\t// document.getElementById(\"speed-value\").innerHTML = stop;\r\n\tlet raiting_value = setInterval(function () {\r\n\t\tdocument.getElementById(\"speed-value\").innerHTML = start;\r\n\t\tstart = raiting_up(start, stop);\r\n\t\tif (start === -1)\r\n\t\t\tclearInterval(raiting_value);\r\n\r\n\t}, 15);\r\n\r\n\tfunction raiting_up(value, stop) {\r\n\t\tup_arrow(value);\r\n\t\tif (value < stop)\r\n\t\t\treturn value + 1;\r\n\t\telse\r\n\t\t\treturn -1;\r\n\t};\r\n};\r\n\r\nfunction up_arrow(start) {\r\n\traiting = start;\r\n};\r\nspeedometr_animation();\r\n\r\n//animation of speedometr\r\nlet raiting = 0;\r\nlet raitingCounter = 0;\r\n\r\nfunction getRaiting() {\r\n\traiting += 1;\r\n\traitingCounter += 1;\r\n\traiting = 0.7 + raiting / 250;\r\n\tif (raitingCounter - 1 === db['raiting'])\r\n\t\treturn -1;\r\n\telse\r\n\t\treturn raiting;\r\n};\r\n\r\nfunction startDrowing(Index) {\r\n\tDrawTicks();\r\n\tDrawZones();\r\n\tDrawDigits();\r\n\tDrawArrow(Index);\r\n\tDrawCenterCircle();\r\n};\r\n\r\nlet drawA = setInterval(function () {\r\n\tlet arrowIndex_value = getRaiting();\r\n\r\n\tif (arrowIndex_value !== -1) {\r\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\tstartDrowing(arrowIndex_value);\r\n\t} else {\r\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\tclearInterval(drawA);\r\n\t\tstartDrowing(arrowValueIndexCorrect)\r\n\t}\r\n}, 15);"]}